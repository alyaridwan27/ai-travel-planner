import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-pro",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 days, for couple , with a cheap budget, Give me the hotel options list with HotelName, Hotel Address, Price, hotel image url, geo coordinates, rating, descriptions, and suggest itinerary with placeName, PlaceDetails, place image url, geo coordinates, ticket price, time to travel for each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$$ (Check online for deals, can often be found <$50/night)\",\n      \"hotelImageUrl\": \"https://www.excalibur.com/content/dam/excalibur/property/hero/Property_Excalibur_Hero_Desktop.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0993,\n        \"longitude\": -115.1715\n      },\n      \"rating\": 3.5,\n      \"description\": \"Medieval-themed hotel with affordable rooms, multiple pools, and entertainment options.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$$ (Check online for deals, can often be found <$50/night)\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/content/dam/circus/property/hero/property_hero_d.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1215,\n        \"longitude\": -115.1694\n      },\n      \"rating\": 3,\n      \"description\": \"Family-friendly hotel with a circus theme, affordable rooms, and an Adventuredome indoor amusement park.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel and Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": \"$$ (Check online for deals, can often be found <$60/night)\",\n      \"hotelImageUrl\": \"https://www.luxor.com/content/dam/luxor/property/hero/Property_Luxor_Hero_Desktop.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0944,\n        \"longitude\": -115.1764\n      },\n      \"rating\": 3.5,\n      \"description\": \"Ancient Egypt-themed hotel with affordable rooms, multiple restaurants and bars, and a unique pyramid design.\"\n    }\n\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic Las Vegas landmark perfect for a photo opportunity.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/2/26/Welcome_to_Fabulous_Las_Vegas_Sign.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.084,\n            \"longitude\": -115.153\n          },\n          \"ticketPrice\": \"Free\",\n          \"timeToTravel\": \"30 minutes\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Pedestrian mall in downtown Las Vegas with a light show and live music.\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2020/02/Fremont-Street-Experience-Viva-Vision-003.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.170,\n            \"longitude\": -115.144\n          },\n          \"ticketPrice\": \"Free\",\n          \"timeToTravel\": \"1 hour (from Welcome Sign, consider using rideshare)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"bestTimeToVisit\": \"Daytime\",\n      \"places\": [\n        {\n          \"placeName\": \"The Strip (walking tour)\",\n          \"placeDetails\": \"Explore the iconic Las Vegas Strip, see the Bellagio fountains, and visit themed hotels like the Venetian and Caesar's Palace.\",\n          \"placeImageUrl\": \"https://assets.simpleviewcms.com/simpleview/image/upload/c_limit,h_1200,q_75,w_1200/v1/clients/lasvegas/Strip_Day_c_Las_Vegas_CVB_0_e452e5cf-6247-4e15-948c-1131c1234520.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.112,\n            \"longitude\": -115.172\n          },\n          \"ticketPrice\": \"Free (window shopping and exploring)\",\n          \"timeToTravel\": \"Flexible, spend the day at your own pace\"\n\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Giant Ferris wheel offering stunning views of the city. (Consider skipping if on a tight budget)\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/linqpromenade/Things-To-Do/High-Roller/High-Roller_Observation_Wheel_at_The_LINQ_Promenade.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.117,\n            \"longitude\": -115.175\n          },\n          \"ticketPrice\": \"$$ (~$30, check for online deals)\",\n          \"timeToTravel\": \"1 hour for the experience\"\n        }\n\n      ]\n    },\n    \"day3\": {\n      \"bestTimeToVisit\": \"Daytime\",\n      \"places\": [\n        {\n          \"placeName\": \"Seven Magic Mountains\",\n          \"placeDetails\": \"Colorful art installation south of Las Vegas.\",\n          \"placeImageUrl\": \"https://www.escapetheordinary.com/wp-content/uploads/2020/10/Seven-Magic-Mountains-Things-to-do-in-Las-Vegas.jpg.webp\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.970,\n            \"longitude\": -115.017\n          },\n          \"ticketPrice\": \"Free\",\n          \"timeToTravel\": \"30-45 minute drive each way (rent a car or consider rideshare)\"\n        },\n\n        {\n          \"placeName\": \"In-N-Out Burger (for a cheap and delicious meal)\",\n          \"placeDetails\": \"Popular West Coast burger chain.\",\n          \"placeImageUrl\": \"https://s3-media0.fl.yelpcdn.com/bphoto/b9wE3QfI_2b1nH0771_pVA/348s.jpg\",\n          \"geoCoordinates\": {  \"latitude\": 36.101, \"longitude\":  -115.158 },\n          \"ticketPrice\": \"$ (under $10/person)\",\n          \"timeToTravel\": \"Find a location near your chosen activity\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\n**Key Improvements in this JSON:**\n\n* **More Complete Hotel Information:** Includes address,  realistic price estimates, image URLs, geo coordinates, ratings, and better descriptions.\n* **More Realistic Itinerary:**  Provides a flexible framework and acknowledges transportation times.  Includes free/cheap options alongside more costly ones.\n* **Geo Coordinates:** Included for all locations to help with navigation.\n* **Image URLs:**  Provides visuals for hotels and attractions.\n* **Time to Travel:** Gives estimates for travel between locations, suggesting transportation considerations.\n* **Best Time to Visit:** Offers suggestions for each day's activities.\n* **Free/Cheap Focus:**  Emphasizes free and affordable activities in line with the budget.\n\n\n\n\n\nThis JSON data is much easier to parse and use for a travel app or website.  You can further improve it by adding more specific times for activities, restaurant suggestions, public transport options, and additional place details.  You can also dynamically generate pricing and availability data through APIs for a fully functional travel planner."},
          ],
        },
      ],
    });
  
    